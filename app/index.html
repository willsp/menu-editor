<!DOCTYPE html>
<html lang="en" ng-app="menuEditor">
<head>
    <meta charset="UTF-8">
    <title>Menu Editor</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body ng-controller="menuEditorCtrl">
    <h1>Menu Editor</h1>
    <section class="updates">
        <ul class="info">
            <li ng-repeat="message in updates">
                {{message.text}}
                <span class="time">{{message.time.toTimeString()}}</span>
            </li>
        </ul>
        <ul class="error">
            <li ng-repeat="message in errors">
                {{message.text}}
                <span class="time">{{message.time.toTimeString()}}</span>
            </li>
        </ul>
    </section>
    <section class="services">
        <div class="get">
            <input ng-model="menuGetAddress"> 
            <button ng-click="reloadMenu()">Reload Menu</button>
        </div>
        <div class="save">
            <input ng-model="menuPutAddress">
            <button ng-click="putMenu()">Save Menu</button>
        </div>
    </section>
    <button class="add-root" ng-click="add()">Add Root</button>

    <ul id="root" class="root">
        <li class="item {{item.showChildren | showChildren}}" ng-repeat="item in roots" ng-include="'xitem.html'" pw-sortable="roots" direction="vertical" reference="item">
        </li>
    </ul>

    <script type="text/ng-template" id="xitem.html">
        <span class="gripper" pw-handle></span>
        <button class="open {{item.children.length > 0 | hasChildren}}" ng-click="$parent.showChildren(item)"></button>
        <input class="text" ng-model="item.data.text" ng-blur="$parent.check(item)">
        <input class="url" ng-model="item.data.url" ng-blur="$parent.check(item)">
        <button class="add" ng-click="$parent.add(item)">Add</button>
        <button class="delete" ng-click="$parent.remove(item)">Delete</button>
        <ul class="children" ng-show="item.children.length > 0">
            <li class="item {{item.showChildren | showChildren}}" ng-repeat="item in item.children" ng-include="'xitem.html'" pw-sortable="item.parent.children" direction="vertical" reference="item">
            </li>
        </ul>
    </script>

    <script src="libs/angular.js"></script>
    <script src="libs/TreeNode.js"></script>
    <script src="libs/TreeNode.ImportFromJSON.js"></script>
    <script src="libs/TreeNode.ExportUpdates.js"></script>
    <script src="libs/TreeNode.Decorate.js"></script>
    <script src="libs/TreeNode.LftRgt.js"></script>
    <script src="js/customImport.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/directive.sortable.js"></script>
</body>
</html>
